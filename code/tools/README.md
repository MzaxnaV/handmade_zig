# Custom tools

1. [wave generator script](./gen_wav.py)
    - Generates 1 second sine wave assuming `py` is available.
    - Run `zig build gen_wav --summary all`.
2. [llvm-mca parser](./parse_llvm_mca.zig)
    - Runs `llvm-mca` assuming it's available.
    - Parses the output to [markdown](/misc/llvm_mca_output.md), assumes above generation was successful.
    - Run `zig build parse_llvm_mca --summary all`.
3. [preprocess profile](./preprocess_profile.zig)
    - No `COUNTER` equivalent in zig and there's no clean way to have a global comptime counter.
    - Write a preprocessor ourselves which runs before building handmade lib target.
    - Generates `<...>__impl()` calls in the zig files.
    - Assumes a `const debug = import(` to be present in zig files within the top two lines.
    - Assumes `platform.<...>()` calls instead of `debug.<...>()` in `win32_handmade.zig`.
    - Assumes `AUTOGENERATED` tags be surrounding the generated `<...>__impl()` calls.
    - Uses `PROFILE` build option to clean all the `<...>__impl()` calls.
    - TODO: overwrite the hardcoded return value on `__COUNTER__()`.
    - TODO: improve code and make it performant.